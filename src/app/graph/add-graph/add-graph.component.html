<app-dashboard-header [title]="'Add Graph'"></app-dashboard-header>

<div class="container">
  <app-card>
    <h3 class="upload-title">Upload file</h3>
    <div
      (dragover)="highlight()"
      (dragleave)="unhighlight()"
      [classList]="
        isHighlighted
          ? 'isHighlighted formbold-file-input'
          : 'formbold-file-input'
      "
    >
      <input
        type="file"
        name="file"
        id="file"
        accept=".csv"
        (change)="readFile($event)"
      />
      <label for="file" (drop)="readFile($event)">
        @if (isHighlighted) {
        <div>
          <span class="formbold-drop-file"> Drop file here </span>
        </div>
        } @else {
        <div>
          <span class="formbold-drop-file"> Drop file here </span>
          <span class="formbold-or"> Or </span>
          <span class="formbold-browse"> Browse </span>
        </div>
        }
      </label>
    </div>
  </app-card>

  @if (isLoaded) {
  <app-card>
    <table mat-table [dataSource]="dataSource">
      @for (head of headers; track head) {
      <ng-container matColumnDef="{{ head }}">
        <th mat-header-cell *matHeaderCellDef>{{ head }}</th>
        <td mat-cell *matCellDef="let element">{{ element[head] }}</td>
      </ng-container>
      }
      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
    </table>

    <mat-paginator
      [pageSizeOptions]="[5, 10, 20]"
      showFirstLastButtons
      aria-label="Select page of periodic elements"
    >
    </mat-paginator>
  </app-card>
  }
</div>
